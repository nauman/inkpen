<%# Inkpen Editor Partial %>
<%# Renders a TipTap-based rich text editor with Stimulus controller %>

<div class="inkpen-editor <%= 'inkpen-editor--fixed-toolbar' if editor.toolbar == :fixed %>"
     <%= tag.attributes(editor.data_attributes) %>
     <%= tag.attributes(editor.html_attributes) %>
     style="<%= editor.style_attributes %>">

  <%# Hidden input for form submission %>
  <input type="hidden"
         name="<%= editor.input_name %>"
         id="<%= editor.input_id %>"
         value="<%= editor.value %>"
         data-inkpen--editor-target="input">

  <%# Fixed toolbar - always visible above editor %>
  <% if editor.toolbar == :fixed %>
    <div class="inkpen-toolbar inkpen-toolbar--fixed"
         data-controller="inkpen--toolbar"
         data-inkpen--editor-target="toolbar"
         data-inkpen--toolbar-style-value="fixed"
         role="toolbar"
         aria-label="Text formatting">
    </div>
  <% end %>

  <%# Editor content area - TipTap mounts here %>
  <div class="inkpen-editor__content"
       data-inkpen--editor-target="content"
       data-placeholder="<%= editor.placeholder %>">
  </div>

  <%# Floating toolbar container (appears on text selection) %>
  <% if editor.toolbar == :floating %>
    <div class="inkpen-toolbar inkpen-toolbar--floating"
         data-controller="inkpen--toolbar"
         data-inkpen--editor-target="toolbar"
         data-inkpen--toolbar-style-value="floating"
         role="toolbar"
         aria-label="Text formatting">
    </div>
  <% end %>
</div>
